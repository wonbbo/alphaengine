{% extends "base.html" %}

{% block title %}설정 - AlphaEngine{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12 d-flex justify-content-between align-items-center">
        <h2><i class="bi bi-sliders"></i> 설정</h2>
        <button class="btn btn-primary" onclick="showAddModal()">
            <i class="bi bi-plus-lg"></i> 새 설정 추가
        </button>
    </div>
</div>

<div class="row" id="configs-container">
    <div class="col-12 text-center py-4">
        <div class="spinner-border"></div>
        <p class="mt-2 text-muted">로딩 중...</p>
    </div>
</div>

<!-- 설정 편집 모달 -->
<div class="modal fade" id="configModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="configModalTitle">설정 편집</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="config-form">
                    <div class="mb-3">
                        <label class="form-label">Key</label>
                        <input type="text" class="form-control" id="config-key" readonly>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Value (JSON)</label>
                        <textarea class="form-control font-monospace" id="config-value" rows="10"></textarea>
                    </div>
                    <input type="hidden" id="config-version">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger me-auto" id="delete-btn" onclick="deleteConfig()">
                    <i class="bi bi-trash"></i> 삭제
                </button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                <button type="button" class="btn btn-primary" onclick="saveConfig()">
                    <i class="bi bi-check-lg"></i> 저장
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 새 설정 추가 모달 -->
<div class="modal fade" id="addConfigModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">새 설정 추가</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="add-config-form">
                    <div class="mb-3">
                        <label class="form-label">Key</label>
                        <input type="text" class="form-control" id="new-config-key" required>
                        <small class="text-muted">예: strategy_params, risk_config</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Value (JSON)</label>
                        <textarea class="form-control font-monospace" id="new-config-value" rows="10" required>{}</textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                <button type="button" class="btn btn-primary" onclick="addConfig()">
                    <i class="bi bi-plus-lg"></i> 추가
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/config.js"></script>
{% endblock %}
